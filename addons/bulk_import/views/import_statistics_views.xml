<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Import Statistics Tree View -->
    <record id="view_import_statistics_tree" model="ir.ui.view">
        <field name="name">import.statistics.tree</field>
        <field name="model">import.statistics</field>
        <field name="arch" type="xml">
            <tree string="Import Statistics">
                <field name="date"/>
                <field name="period"/>
                <field name="total_imports"/>
                <field name="successful_imports"/>
                <field name="failed_imports"/>
                <field name="total_records"/>
                <field name="successful_records"/>
                <field name="error_records"/>
                <field name="avg_duration"/>
                <field name="data_quality_score"/>
            </tree>
        </field>
    </record>

    <!-- Import Statistics Form View -->
    <record id="view_import_statistics_form" model="ir.ui.view">
        <field name="name">import.statistics.form</field>
        <field name="model">import.statistics</field>
        <field name="arch" type="xml">
            <form string="Import Statistics">
                <header>
                    <button name="action_view_imports" type="object" string="View Imports" class="btn-primary"/>
                    <button name="action_view_history" type="object" string="View History" class="btn-secondary"/>
                    <button name="action_generate_report" type="object" string="Generate Report" class="btn-secondary"/>
                    <button name="action_export_statistics" type="object" string="Export Statistics" class="btn-secondary"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_imports" type="object" class="oe_stat_button" icon="fa-upload">
                            <field name="total_imports" widget="statinfo" string="Total Imports"/>
                        </button>
                        <button name="action_view_imports" type="object" class="oe_stat_button" icon="fa-check">
                            <field name="successful_imports" widget="statinfo" string="Successful"/>
                        </button>
                        <button name="action_view_imports" type="object" class="oe_stat_button" icon="fa-times">
                            <field name="failed_imports" widget="statinfo" string="Failed"/>
                        </button>
                        <button name="action_view_imports" type="object" class="oe_stat_button" icon="fa-list">
                            <field name="total_records" widget="statinfo" string="Total Records"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="display_name"/>
                        </h1>
                    </div>
                    <group>
                        <group name="period_info">
                            <field name="date"/>
                            <field name="period"/>
                            <field name="company_id"/>
                        </group>
                        <group name="import_metrics">
                            <field name="total_imports"/>
                            <field name="successful_imports"/>
                            <field name="failed_imports"/>
                            <field name="cancelled_imports"/>
                        </group>
                    </group>
                    <group>
                        <group name="record_metrics">
                            <field name="total_records"/>
                            <field name="successful_records"/>
                            <field name="error_records"/>
                            <field name="warning_records"/>
                        </group>
                        <group name="performance_metrics">
                            <field name="avg_duration"/>
                            <field name="min_duration"/>
                            <field name="max_duration"/>
                            <field name="avg_records_per_second"/>
                        </group>
                    </group>
                    <group>
                        <group name="file_metrics">
                            <field name="total_file_size"/>
                            <field name="avg_file_size"/>
                        </group>
                        <group name="data_quality">
                            <field name="data_quality_score"/>
                            <field name="completeness_score"/>
                            <field name="accuracy_score"/>
                            <field name="consistency_score"/>
                        </group>
                    </group>
                    <group>
                        <group name="business_impact">
                            <field name="cost_savings"/>
                            <field name="time_savings"/>
                            <field name="efficiency_improvement"/>
                        </group>
                        <group name="trends">
                            <field name="import_trend"/>
                            <field name="success_rate_trend"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Template Usage" name="template_usage">
                            <field name="template_usage"/>
                        </page>
                        <page string="Model Usage" name="model_usage">
                            <field name="model_usage"/>
                        </page>
                        <page string="Error Analysis" name="error_analysis">
                            <field name="error_types"/>
                            <field name="common_errors"/>
                        </page>
                        <page string="User Metrics" name="user_metrics">
                            <field name="active_users"/>
                            <field name="user_imports"/>
                        </page>
                        <page string="Company Metrics" name="company_metrics">
                            <field name="company_imports"/>
                        </page>
                        <page string="Import History" name="import_history">
                            <field name="import_history_ids">
                                <tree>
                                    <field name="import_job_id"/>
                                    <field name="import_date"/>
                                    <field name="status"/>
                                    <field name="total_records"/>
                                    <field name="success_records"/>
                                    <field name="error_records"/>
                                    <field name="data_quality_score"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Import Statistics Search View -->
    <record id="view_import_statistics_search" model="ir.ui.view">
        <field name="name">import.statistics.search</field>
        <field name="model">import.statistics</field>
        <field name="arch" type="xml">
            <search string="Import Statistics">
                <field name="date"/>
                <field name="period"/>
                <separator/>
                <filter string="Today" name="today" domain="[('date', '=', context_today())]"/>
                <filter string="This Week" name="this_week" domain="[('date', '>=', (context_today() - datetime.timedelta(days=7)).strftime('%Y-%m-%d'))]"/>
                <filter string="This Month" name="this_month" domain="[('date', '>=', (context_today() - datetime.timedelta(days=30)).strftime('%Y-%m-%d'))]"/>
                <separator/>
                <filter string="Daily" name="daily" domain="[('period', '=', 'daily')]"/>
                <filter string="Weekly" name="weekly" domain="[('period', '=', 'weekly')]"/>
                <filter string="Monthly" name="monthly" domain="[('period', '=', 'monthly')]"/>
                <filter string="Quarterly" name="quarterly" domain="[('period', '=', 'quarterly')]"/>
                <filter string="Yearly" name="yearly" domain="[('period', '=', 'yearly')]"/>
                <separator/>
                <filter string="High Quality" name="high_quality" domain="[('data_quality_score', '>=', 90)]"/>
                <filter string="Medium Quality" name="medium_quality" domain="[('data_quality_score', '>=', 70), ('data_quality_score', '<', 90)]"/>
                <filter string="Low Quality" name="low_quality" domain="[('data_quality_score', '<', 70)]"/>
                <group expand="0" string="Group By">
                    <filter string="Date" name="group_date" context="{'group_by': 'date'}"/>
                    <filter string="Period" name="group_period" context="{'group_by': 'period'}"/>
                    <filter string="Company" name="group_company" context="{'group_by': 'company_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Import Statistics Graph View -->
    <record id="view_import_statistics_graph" model="ir.ui.view">
        <field name="name">import.statistics.graph</field>
        <field name="model">import.statistics</field>
        <field name="arch" type="xml">
            <graph string="Import Statistics" type="bar">
                <field name="date" type="row"/>
                <field name="total_imports" type="measure"/>
                <field name="successful_imports" type="measure"/>
                <field name="failed_imports" type="measure"/>
                <field name="total_records" type="measure"/>
                <field name="data_quality_score" type="measure"/>
            </graph>
        </field>
    </record>

    <!-- Import Statistics Pivot View -->
    <record id="view_import_statistics_pivot" model="ir.ui.view">
        <field name="name">import.statistics.pivot</field>
        <field name="model">import.statistics</field>
        <field name="arch" type="xml">
            <pivot string="Import Statistics">
                <field name="date" type="row"/>
                <field name="period" type="col"/>
                <field name="total_imports" type="measure"/>
                <field name="successful_imports" type="measure"/>
                <field name="failed_imports" type="measure"/>
                <field name="total_records" type="measure"/>
                <field name="data_quality_score" type="measure"/>
            </pivot>
        </field>
    </record>
</odoo>