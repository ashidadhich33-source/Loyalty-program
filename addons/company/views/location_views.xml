<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Locations Tree View -->
        <record id="view_locations_tree" model="ir.ui.view">
            <field name="name">locations.tree</field>
            <field name="model">company.location</field>
            <field name="arch" type="xml">
                <tree string="Locations" decoration-muted="not is_active" decoration-info="is_default">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="company_id"/>
                    <field name="branch_id"/>
                    <field name="location_type"/>
                    <field name="parent_location_id"/>
                    <field name="manager_id"/>
                    <field name="current_capacity"/>
                    <field name="max_capacity"/>
                    <field name="is_active"/>
                    <field name="is_default"/>
                </tree>
            </field>
        </record>
        
        <!-- Locations Form View -->
        <record id="view_locations_form" model="ir.ui.view">
            <field name="name">locations.form</field>
            <field name="model">company.location</field>
            <field name="arch" type="xml">
                <form string="Location">
                    <header>
                        <button name="action_activate" string="Activate" type="object" class="btn-primary" attrs="{'invisible': [('is_active', '=', True)]}"/>
                        <button name="action_deactivate" string="Deactivate" type="object" class="btn-warning" attrs="{'invisible': [('is_active', '=', False)]}"/>
                        <button name="action_set_default" string="Set as Default" type="object" class="btn-secondary" attrs="{'invisible': [('is_default', '=', True)]}"/>
                        <button name="action_duplicate" string="Duplicate" type="object" class="btn-info"/>
                        <field name="is_active" widget="statusbar" statusbar_visible="False,True"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="Location Name"/>
                            </h1>
                        </div>
                        
                        <group>
                            <group string="Basic Information">
                                <field name="code"/>
                                <field name="description"/>
                                <field name="company_id"/>
                                <field name="branch_id"/>
                                <field name="location_type"/>
                                <field name="parent_location_id"/>
                                <field name="location_level"/>
                            </group>
                            <group string="Contact Information">
                                <field name="phone"/>
                                <field name="mobile"/>
                                <field name="email"/>
                                <field name="manager_id"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Address">
                                <field name="street"/>
                                <field name="street2"/>
                                <field name="city"/>
                                <field name="state_id"/>
                                <field name="zip"/>
                                <field name="country_id"/>
                            </group>
                            <group string="Location Settings">
                                <field name="is_active"/>
                                <field name="is_default"/>
                                <field name="max_capacity"/>
                                <field name="current_capacity"/>
                                <field name="capacity_unit"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Location Features">
                                <field name="enable_inventory"/>
                                <field name="enable_sales"/>
                                <field name="enable_purchase"/>
                                <field name="enable_manufacturing"/>
                            </group>
                            <group string="Location Analytics">
                                <field name="total_products"/>
                                <field name="total_value"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Coordinates">
                                <field name="latitude"/>
                                <field name="longitude"/>
                            </group>
                            <group string="Operating Hours">
                                <field name="operating_hours"/>
                            </group>
                        </group>
                        
                        <notebook>
                            <page string="Users" name="users">
                                <field name="user_ids" widget="many2many_tags"/>
                            </page>
                            
                            <page string="Services" name="services">
                                <field name="services_ids" widget="many2many_tags"/>
                            </page>
                            
                            <page string="Child Locations" name="children">
                                <field name="child_location_ids" nolabel="1">
                                    <tree>
                                        <field name="name"/>
                                        <field name="code"/>
                                        <field name="location_type"/>
                                        <field name="manager_id"/>
                                        <field name="is_active"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                        
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- Locations Search View -->
        <record id="view_locations_search" model="ir.ui.view">
            <field name="name">locations.search</field>
            <field name="model">company.location</field>
            <field name="arch" type="xml">
                <search string="Search Locations">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="description"/>
                    <field name="company_id"/>
                    <field name="branch_id"/>
                    <field name="location_type"/>
                    <field name="manager_id"/>
                    <filter string="Active Locations" name="active" domain="[('is_active', '=', True)]"/>
                    <filter string="Inactive Locations" name="inactive" domain="[('is_active', '=', False)]"/>
                    <filter string="Default Locations" name="default" domain="[('is_default', '=', True)]"/>
                    <filter string="Warehouse" name="warehouse" domain="[('location_type', '=', 'warehouse')]"/>
                    <filter string="Showroom" name="showroom" domain="[('location_type', '=', 'showroom')]"/>
                    <filter string="Office" name="office" domain="[('location_type', '=', 'office')]"/>
                    <filter string="Storage" name="storage" domain="[('location_type', '=', 'storage')]"/>
                    <filter string="Retail Store" name="retail" domain="[('location_type', '=', 'retail')]"/>
                    <filter string="Wholesale Store" name="wholesale" domain="[('location_type', '=', 'wholesale')]"/>
                    <filter string="Franchise Store" name="franchise" domain="[('location_type', '=', 'franchise')]"/>
                    <filter string="Distribution Center" name="distribution" domain="[('location_type', '=', 'distribution')]"/>
                    <filter string="Manufacturing Unit" name="manufacturing" domain="[('location_type', '=', 'manufacturing')]"/>
                    <filter string="Other" name="other" domain="[('location_type', '=', 'other')]"/>
                    <group expand="0" string="Group By">
                        <filter string="Company" name="group_company" context="{'group_by': 'company_id'}"/>
                        <filter string="Branch" name="group_branch" context="{'group_by': 'branch_id'}"/>
                        <filter string="Location Type" name="group_location_type" context="{'group_by': 'location_type'}"/>
                        <filter string="Manager" name="group_manager" context="{'group_by': 'manager_id'}"/>
                        <filter string="Parent Location" name="group_parent" context="{'group_by': 'parent_location_id'}"/>
                        <filter string="Created Date" name="group_create_date" context="{'group_by': 'create_date:day'}"/>
                    </group>
                </search>
            </field>
        </record>
        
        <!-- Locations Action -->
        <record id="action_locations" model="ir.actions.act_window">
            <field name="name">Locations</field>
            <field name="res_model">company.location</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_locations_tree"/>
            <field name="search_view_id" ref="view_locations_search"/>
            <field name="context">{'search_default_active': 1}</field>
        </record>
        
    </data>
</odoo>