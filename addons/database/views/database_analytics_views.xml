<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Database Analytics Tree View -->
        <record id="view_database_analytics_tree" model="ir.ui.view">
            <field name="name">database_analytics.tree</field>
            <field name="model">database.analytics</field>
            <field name="arch" type="xml">
                <tree string="Database Analytics" decoration-muted="status=='pending'" decoration-success="status=='completed'" decoration-warning="status=='in_progress'" decoration-danger="status=='failed'">
                    <field name="name"/>
                    <field name="database_id"/>
                    <field name="analytics_type"/>
                    <field name="status"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="total_queries"/>
                    <field name="slow_queries"/>
                    <field name="average_response_time"/>
                    <field name="health_score"/>
                    <field name="performance_score"/>
                    <field name="security_score"/>
                </tree>
            </field>
        </record>
        
        <!-- Database Analytics Form View -->
        <record id="view_database_analytics_form" model="ir.ui.view">
            <field name="name">database_analytics.form</field>
            <field name="model">database.analytics</field>
            <field name="arch" type="xml">
                <form string="Database Analytics">
                    <header>
                        <button name="action_start_analytics" string="Start Analytics" type="object" class="btn-primary" attrs="{'invisible': [('status', '!=', 'pending')]}"/>
                        <button name="action_complete_analytics" string="Complete Analytics" type="object" class="btn-success" attrs="{'invisible': [('status', '!=', 'in_progress')]}"/>
                        <button name="action_fail_analytics" string="Fail Analytics" type="object" class="btn-danger" attrs="{'invisible': [('status', '!=', 'in_progress')]}"/>
                        <button name="action_cancel_analytics" string="Cancel Analytics" type="object" class="btn-warning" attrs="{'invisible': [('status', 'not in', ['pending', 'in_progress'])]}"/>
                        <button name="action_generate_report" string="Generate Report" type="object" class="btn-info" attrs="{'invisible': [('status', '!=', 'completed')]}"/>
                        <button name="action_export_analytics" string="Export Analytics" type="object" class="btn-secondary" attrs="{'invisible': [('status', '!=', 'completed')]}"/>
                        <button name="action_analyze_trends" string="Analyze Trends" type="object" class="btn-warning" attrs="{'invisible': [('status', '!=', 'completed')]}"/>
                        <field name="status" widget="statusbar" statusbar_visible="pending,in_progress,completed,failed"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="Analytics Name"/>
                            </h1>
                        </div>
                        
                        <group>
                            <group string="Basic Information">
                                <field name="description"/>
                                <field name="database_id"/>
                                <field name="analytics_type"/>
                                <field name="status"/>
                            </group>
                            <group string="Analytics Period">
                                <field name="date_from"/>
                                <field name="date_to"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Performance Analytics">
                                <field name="total_queries"/>
                                <field name="slow_queries"/>
                                <field name="average_response_time"/>
                                <field name="peak_response_time"/>
                                <field name="throughput"/>
                            </group>
                            <group string="Usage Analytics">
                                <field name="total_connections"/>
                                <field name="peak_connections"/>
                                <field name="average_connections"/>
                                <field name="connection_duration"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Security Analytics">
                                <field name="failed_logins"/>
                                <field name="security_violations"/>
                                <field name="blocked_ips"/>
                            </group>
                            <group string="Storage Analytics">
                                <field name="database_size"/>
                                <field name="table_count"/>
                                <field name="record_count"/>
                                <field name="index_count"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Query Analytics">
                                <field name="most_used_tables"/>
                                <field name="slowest_queries"/>
                                <field name="query_patterns"/>
                            </group>
                            <group string="Connection Analytics">
                                <field name="connection_sources"/>
                                <field name="connection_times"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Backup Analytics">
                                <field name="backup_frequency"/>
                                <field name="backup_success_rate"/>
                                <field name="backup_size_trend"/>
                            </group>
                            <group string="Migration Analytics">
                                <field name="migration_frequency"/>
                                <field name="migration_success_rate"/>
                                <field name="migration_duration"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Analytics Insights">
                                <field name="insights"/>
                                <field name="recommendations"/>
                            </group>
                            <group string="Analytics Trends">
                                <field name="performance_trend"/>
                                <field name="usage_trend"/>
                                <field name="security_trend"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Analytics Scores">
                                <field name="health_score"/>
                                <field name="performance_score"/>
                                <field name="security_score"/>
                            </group>
                            <group string="Analytics Timing">
                                <field name="start_time"/>
                                <field name="end_time"/>
                                <field name="duration"/>
                            </group>
                        </group>
                        
                        <group>
                            <group string="Analytics Logs">
                                <field name="log_file"/>
                                <field name="error_message"/>
                            </group>
                            <group string="Analytics Metadata">
                                <field name="metadata"/>
                            </group>
                        </group>
                        
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- Database Analytics Search View -->
        <record id="view_database_analytics_search" model="ir.ui.view">
            <field name="name">database_analytics.search</field>
            <field name="model">database.analytics</field>
            <field name="arch" type="xml">
                <search string="Search Database Analytics">
                    <field name="name"/>
                    <field name="description"/>
                    <field name="database_id"/>
                    <field name="analytics_type"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <filter string="Pending Analytics" name="pending" domain="[('status', '=', 'pending')]"/>
                    <filter string="In Progress Analytics" name="in_progress" domain="[('status', '=', 'in_progress')]"/>
                    <filter string="Completed Analytics" name="completed" domain="[('status', '=', 'completed')]"/>
                    <filter string="Failed Analytics" name="failed" domain="[('status', '=', 'failed')]"/>
                    <filter string="Cancelled Analytics" name="cancelled" domain="[('status', '=', 'cancelled')]"/>
                    <filter string="Performance Analytics" name="performance" domain="[('analytics_type', '=', 'performance')]"/>
                    <filter string="Usage Analytics" name="usage" domain="[('analytics_type', '=', 'usage')]"/>
                    <filter string="Security Analytics" name="security" domain="[('analytics_type', '=', 'security')]"/>
                    <filter string="Storage Analytics" name="storage" domain="[('analytics_type', '=', 'storage')]"/>
                    <filter string="Query Analytics" name="query" domain="[('analytics_type', '=', 'query')]"/>
                    <filter string="Connection Analytics" name="connection" domain="[('analytics_type', '=', 'connection')]"/>
                    <filter string="Backup Analytics" name="backup" domain="[('analytics_type', '=', 'backup')]"/>
                    <filter string="Migration Analytics" name="migration" domain="[('analytics_type', '=', 'migration')]"/>
                    <filter string="Custom Analytics" name="custom" domain="[('analytics_type', '=', 'custom')]"/>
                    <group expand="0" string="Group By">
                        <filter string="Database" name="group_database" context="{'group_by': 'database_id'}"/>
                        <filter string="Analytics Type" name="group_analytics_type" context="{'group_by': 'analytics_type'}"/>
                        <filter string="Status" name="group_status" context="{'group_by': 'status'}"/>
                        <filter string="From Date" name="group_date_from" context="{'group_by': 'date_from:day'}"/>
                        <filter string="To Date" name="group_date_to" context="{'group_by': 'date_to:day'}"/>
                    </group>
                </search>
            </field>
        </record>
        
        <!-- Database Analytics Action -->
        <record id="action_database_analytics" model="ir.actions.act_window">
            <field name="name">Database Analytics</field>
            <field name="res_model">database.analytics</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_database_analytics_tree"/>
            <field name="search_view_id" ref="view_database_analytics_search"/>
            <field name="context">{'search_default_completed': 1}</field>
        </record>
        
        <!-- Analytics Dashboard Action -->
        <record id="action_analytics_dashboard" model="ir.actions.act_window">
            <field name="name">Analytics Dashboard</field>
            <field name="res_model">database.analytics</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_database_analytics_tree"/>
            <field name="search_view_id" ref="view_database_analytics_search"/>
            <field name="context">{'search_default_completed': 1}</field>
        </record>
        
        <!-- Analytics Reports Action -->
        <record id="action_analytics_reports" model="ir.actions.act_window">
            <field name="name">Analytics Reports</field>
            <field name="res_model">database.analytics</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_database_analytics_tree"/>
            <field name="search_view_id" ref="view_database_analytics_search"/>
            <field name="context">{'search_default_completed': 1}</field>
        </record>
        
    </data>
</odoo>