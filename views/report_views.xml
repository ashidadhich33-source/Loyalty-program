<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Report Analytics Tree View -->
    <record id="view_report_analytics_tree" model="ir.ui.view">
        <field name="name">report.analytics.tree</field>
        <field name="model">report.analytics</field>
        <field name="arch" type="xml">
            <tree string="Sales Analytics">
                <field name="date"/>
                <field name="month"/>
                <field name="quarter"/>
                <field name="year"/>
                <field name="total_sales"/>
                <field name="total_orders"/>
                <field name="avg_order_value"/>
                <field name="newborn_sales"/>
                <field name="infant_sales"/>
                <field name="toddler_sales"/>
                <field name="preschool_sales"/>
                <field name="child_sales"/>
                <field name="teen_sales"/>
                <field name="boys_sales"/>
                <field name="girls_sales"/>
                <field name="unisex_sales"/>
                <field name="spring_sales"/>
                <field name="summer_sales"/>
                <field name="fall_sales"/>
                <field name="winter_sales"/>
                <field name="new_customers"/>
                <field name="returning_customers"/>
                <field name="loyalty_points_earned"/>
                <field name="loyalty_points_used"/>
                <field name="total_products_sold"/>
                <field name="unique_products_sold"/>
                <field name="gift_wraps_sold"/>
                <field name="exchanges_processed"/>
                <field name="returns_processed"/>
                <field name="exchange_return_rate"/>
            </tree>
        </field>
    </record>

    <!-- Report Analytics Search View -->
    <record id="view_report_analytics_search" model="ir.ui.view">
        <field name="name">report.analytics.search</field>
        <field name="model">report.analytics</field>
        <field name="arch" type="xml">
            <search string="Sales Analytics">
                <field name="date"/>
                <field name="month"/>
                <field name="quarter"/>
                <field name="year"/>
                <filter name="this_month" string="This Month" domain="[('month', '=', context_today().strftime('%Y-%m'))]"/>
                <filter name="this_quarter" string="This Quarter" domain="[('quarter', '=', 'Q' + str((context_today().month - 1) // 3 + 1))]"/>
                <filter name="this_year" string="This Year" domain="[('year', '=', context_today().year)]"/>
                <filter name="last_30_days" string="Last 30 Days" domain="[('date', '>=', (context_today() - datetime.timedelta(days=30)).strftime('%Y-%m-%d'))]"/>
                <filter name="last_90_days" string="Last 90 Days" domain="[('date', '>=', (context_today() - datetime.timedelta(days=90)).strftime('%Y-%m-%d'))]"/>
                <group expand="0" string="Group By">
                    <filter name="group_by_date" string="Date" context="{'group_by': 'date'}"/>
                    <filter name="group_by_month" string="Month" context="{'group_by': 'month'}"/>
                    <filter name="group_by_quarter" string="Quarter" context="{'group_by': 'quarter'}"/>
                    <filter name="group_by_year" string="Year" context="{'group_by': 'year'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Report Analytics Action -->
    <record id="action_report_analytics" model="ir.actions.act_window">
        <field name="name">Sales Analytics</field>
        <field name="res_model">report.analytics</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Age Group Sales Report -->
    <record id="action_age_group_sales" model="ir.actions.act_window">
        <field name="name">Age Group Sales</field>
        <field name="res_model">report.analytics</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('newborn_sales', '>', 0), ('infant_sales', '>', 0), ('toddler_sales', '>', 0), ('preschool_sales', '>', 0), ('child_sales', '>', 0), ('teen_sales', '>', 0)]</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Gender Sales Report -->
    <record id="action_gender_sales" model="ir.actions.act_window">
        <field name="name">Gender Sales</field>
        <field name="res_model">report.analytics</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('boys_sales', '>', 0), ('girls_sales', '>', 0), ('unisex_sales', '>', 0)]</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Seasonal Sales Report -->
    <record id="action_seasonal_sales" model="ir.actions.act_window">
        <field name="name">Seasonal Sales</field>
        <field name="res_model">report.analytics</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('spring_sales', '>', 0), ('summer_sales', '>', 0), ('fall_sales', '>', 0), ('winter_sales', '>', 0)]</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Customer Analytics Report -->
    <record id="action_customer_analytics" model="ir.actions.act_window">
        <field name="name">Customer Analytics</field>
        <field name="res_model">report.analytics</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('new_customers', '>', 0), ('returning_customers', '>', 0)]</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Product Analytics Report -->
    <record id="action_product_analytics" model="ir.actions.act_window">
        <field name="name">Product Analytics</field>
        <field name="res_model">report.analytics</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('total_products_sold', '>', 0), ('unique_products_sold', '>', 0)]</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Exchange/Return Analytics Report -->
    <record id="action_exchange_return_analytics" model="ir.actions.act_window">
        <field name="name">Exchange/Return Analytics</field>
        <field name="res_model">report.analytics</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('exchanges_processed', '>', 0), ('returns_processed', '>', 0)]</field>
        <field name="context">{'search_default_this_month': 1}</field>
    </record>

    <!-- Reports Menu -->
    <menuitem id="menu_reports_analytics" 
              name="Analytics" 
              parent="kids_clothing_erp.menu_reports_management" 
              sequence="10"/>
    
    <menuitem id="menu_sales_analytics" 
              name="Sales Analytics" 
              parent="menu_reports_analytics" 
              action="action_report_analytics" 
              sequence="10"/>
    
    <menuitem id="menu_age_group_sales" 
              name="Age Group Sales" 
              parent="menu_reports_analytics" 
              action="action_age_group_sales" 
              sequence="20"/>
    
    <menuitem id="menu_gender_sales" 
              name="Gender Sales" 
              parent="menu_reports_analytics" 
              action="action_gender_sales" 
              sequence="30"/>
    
    <menuitem id="menu_seasonal_sales" 
              name="Seasonal Sales" 
              parent="menu_reports_analytics" 
              action="action_seasonal_sales" 
              sequence="40"/>
    
    <menuitem id="menu_customer_analytics" 
              name="Customer Analytics" 
              parent="menu_reports_analytics" 
              action="action_customer_analytics" 
              sequence="50"/>
    
    <menuitem id="menu_product_analytics" 
              name="Product Analytics" 
              parent="menu_reports_analytics" 
              action="action_product_analytics" 
              sequence="60"/>
    
    <menuitem id="menu_exchange_return_analytics" 
              name="Exchange/Return Analytics" 
              parent="menu_reports_analytics" 
              action="action_exchange_return_analytics" 
              sequence="70"/>
</odoo>